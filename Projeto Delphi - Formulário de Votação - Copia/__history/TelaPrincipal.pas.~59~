unit TelaPrincipal;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants,
  System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ExtCtrls, Vcl.StdCtrls,
  System.ImageList, Vcl.ImgList, Vcl.Buttons, TelaSecundaria, Conexaobanco;

type
  TFormPrincipal = class(TForm)
    Panel1: TPanel;
    Panel2: TPanel;
    Panel3: TPanel;
    Label1: TLabel;
    Panel4: TPanel;
    ImageList1: TImageList;
    BtCCenter: TSpeedButton;
    BtRecep: TSpeedButton;
    BtnFat: TSpeedButton;
    BtnMed: TSpeedButton;
    BtnGes: TSpeedButton;
    BtnFin: TSpeedButton;
    Panel5: TPanel;
    LEmpresa: TLabel;
    LNome: TLabel;
    LTipUsuario: TLabel;
    procedure BtCCenterClick(Sender: TObject);
    procedure BtRecepClick(Sender: TObject);
    procedure BtnFatClick(Sender: TObject);
    procedure BtnFinClick(Sender: TObject);
    procedure BtnGesClick(Sender: TObject);
    procedure BtnMedClick(Sender: TObject);
    procedure FormShow(Sender: TObject);
  private
    { Private declarations }
  public
    dadosg: string;
  end;

var
  FormPrincipal: TFormPrincipal;

implementation

{$R *.dfm}

// BOTÃO CALL CENTER
procedure TFormPrincipal.BtCCenterClick(Sender: TObject);

var
  Resposta: Integer;
var
  Dados: string;

begin
  Resposta := MessageDlg('Você confirma sua opção: ' + BtCCenter.caption,
    mtConfirmation, [mbYes, mbNo], 0);

  // Confirmação de resposta de usuário
  case Resposta of
    mrYes:
      begin
         ShowMessage('Alterações salvas!');
        Dados := LEmpresa.caption + LNome.caption + LTipUsuario.caption +
          BtCCenter.caption;
        dadosg := Dados;

        // TelaSecundaria.Observacoes.ObsEscClick(dad);
        Observacoes.ShowModal;
      end;

    mrNo:
      begin
        ShowMessage('Alterações descartadas!');
      end;

  end;
end;

// BOTÃO FATURAMENTO
procedure TFormPrincipal.BtnFatClick(Sender: TObject);

var
  Resposta: Integer;
begin

  Resposta := MessageDlg('Você confirma sua opção: ' + BtnFat.caption,
    mtConfirmation, [mbYes, mbNo], 0);

  // Confirmação de resposta de usuário
  case Resposta of
    mrYes:
      begin
        // ShowMessage('Alterações salvas!');
        // Dados := LEmpresa.caption + LNome.caption + LTipUsuario.caption +
        // BtCCenter.caption;
        // dadosg := Dados;

        // TelaSecundaria.Observacoes.ObsEscClick(dad);
        Observacoes.ShowModal;
      end;

    mrNo:
      begin
        // Código para descartar as alterações
        ShowMessage('Alterações descartadas!');
      end;

  end;
end;

// BOTÃO FINANCEIRO
procedure TFormPrincipal.BtnFinClick(Sender: TObject);

var
  Resposta: Integer;
begin

  Resposta := MessageDlg('Você confirma sua opção: ' + BtnFin.caption,
    mtConfirmation, [mbYes, mbNo, mbCancel], 0);

  // Confirmação de resposta de usuário
  case Resposta of
    mrYes:
      begin
         ShowMessage('Alterações salvas!');
        // Dados := LEmpresa.caption + LNome.caption + LTipUsuario.caption +
        // BtCCenter.caption;
        // dadosg := Dados;

        // TelaSecundaria.Observacoes.ObsEscClick(dad);
        Observacoes.ShowModal;
      end;

    mrNo:
      begin
        ShowMessage('Alterações descartadas!');
      end;

  end;
end;

// BOTÃO GESTÃO
procedure TFormPrincipal.BtnGesClick(Sender: TObject);

var
  Resposta: Integer;
begin

  Resposta := MessageDlg('Você confirma sua opção: ' + BtnGes.caption,
    mtConfirmation, [mbYes, mbNo], 0);

  // Confirmação de resposta de usuário
  case Resposta of
    mrYes:
      begin
        // ShowMessage('Alterações salvas!');
        // Dados := LEmpresa.caption + LNome.caption + LTipUsuario.caption +
        // BtCCenter.caption;
        // dadosg := Dados;

        // TelaSecundaria.Observacoes.ObsEscClick(dad);
        Observacoes.ShowModal;
      end;

    mrNo:
      begin
        ShowMessage('Alterações descartadas!');
      end;

  end;
end;

// BOTÃO FLUXO MEDNEWS
procedure TFormPrincipal.BtnMedClick(Sender: TObject);

var
  Resposta: Integer;
begin

  Resposta := MessageDlg('Você confirma sua opção: ' + BtnMed.caption,
    mtConfirmation, [mbYes, mbNo], 0);

  // Confirmação de resposta de usuário
  case Resposta of
    mrYes:
      begin
        // ShowMessage('Alterações salvas!');
        // Dados := LEmpresa.caption + LNome.caption + LTipUsuario.caption +
        // BtCCenter.caption;
        // dadosg := Dados;

        // TelaSecundaria.Observacoes.ObsEscClick(dad);
        Observacoes.ShowModal;
      end;

    mrNo:
      begin

        ShowMessage('Alterações descartadas!');
      end;

  end;
end;

// BOTÃO RECEPÇÃO
procedure TFormPrincipal.BtRecepClick(Sender: TObject);

var
  Resposta: Integer;

begin
  Resposta := MessageDlg('Você confirma sua opção: ' + BtRecep.caption,
    mtConfirmation, [mbYes, mbNo], 0);

  // Confirmação de resposta de usuário
  case Resposta of
    mrYes:
      begin
        // ShowMessage('Alterações salvas!');
        // Dados := LEmpresa.caption + LNome.caption + LTipUsuario.caption +
        // BtCCenter.caption;
        // dadosg := Dados;

        // TelaSecundaria.Observacoes.ObsEscClick(dad);
        Observacoes.ShowModal;
      end;

    mrNo:
      begin

        ShowMessage('Alterações descartadas!');
      end;
  end;

end;

procedure TFormPrincipal.FormShow(Sender: TObject);

{ Pode pegar usuário e senha para validar dos dados e entrar na query
  ele vai ter que fazer uma busca no banco para validar o usuário e a partir disso
  pegar os dados empresa, usuario e tipo }

var
  Acesso: Integer;

begin
  Acesso := MessageDlg('Olá!' + #13#10 + #13#10 +
    'Estamos realizando uma pesquisa sobre os modulos de nossos sistema. Essa pesquisa auxiliará no melhor funcionamento do seu estabelecimento.'
    + #13#10 + #13#10 + 'Voce gostaria de participar ?', mtConfirmation,
    [mbYes, mbNo], 0);

  case Acesso of
    mrYes:
      begin

      TelaPrincipal.FormPrincipal.Color := $D1B499;


        // LEmpresa.Caption := QueryEmpresa.FieldByName('Nome').AsString;
        Conexaobanco.dm_dados.QueryEmpresa.Open();
        LEmpresa.caption := Conexaobanco.dm_dados.QueryEmpresa.FieldByName
          ('EMP_FANTASIA').AsString;
          Conexaobanco.dm_dados.QueryEmpresa.Close();

      end;

    mrNo:
      begin
        ShowMessage('Obrigado!');
        FormPrincipal.Close;
      end;

  end;

end;

end.
